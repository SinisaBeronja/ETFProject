<div class="header"><h2>>Evaluacija projekta {{project.nazivProjekta}}, {{project.ime}} {{project.prezime}}, {{project.nazivInstSrp}}</h2></div>
<br>
<br>

<div *ngIf="evaluations.length>0" class="container">
    <div class="row">
        <div class="column">
            <table class="table table-striped table-hover table-sm">
                <tbody>
                    <tr>
                        <th>Datum</th>
                        <th>Sugestija</th>
                        <th>Primedbe</th>
                        <th>Zahtevi</th>
                        <th>Status</th>
                        <th>Obrazlozenje</th>
                        <th *ngIf='user.lozinka==="1admin246"'>Izmeni</th>
                        <th *ngIf='user.lozinka==="1admin246"'>Obriši</th>
                    </tr>
                    <tr *ngFor="let evaluation of evaluations">
                        <td>{{evaluation.datumEvaluacije}}</td>
                        <td>{{evaluation.sugestije}}</td>
                        <td>{{evaluation.primedbe}}</td>
                        <td>{{evaluation.zahtevi}}</td>
                        <td>{{evaluation.statusProjekta}}</td>
                        <td>{{evaluation.obrazlozenje}}</td>
                        <td *ngIf='user.lozinka==="1admin246"'><button (click)="editEvaluation(evaluation)">Izmeniti</button></td>
                        <td *ngIf='user.lozinka==="1admin246"'><button (click)="deleteEvaluation(evaluation)">Obrisati</button></td>
                    </tr>
                    <!--  Ukoliko je admin samo onda prikazi dugmad obrisi i izmeni-->
                </tbody>
            </table>
         </div>
    </div>
</div>

<div *ngIf='user.lozinka==="admin246"'>
    <div>
        <h2> Dodaj evaluaciju</h2>
    </div>
    <br><br>
    <div class="container">
        <div class="row">
            <div class="column">
                <table class="table table-striped table-hover table-sm">
                    <tbody>
                        <tr>
                            <td>Datum:</td>
                            <td><input type="text" name="datumEvaluacije" [(ngModel)]="datumEvaluacije"></td>
                        </tr>
                        <tr>
                            <td class="select">Status projekta:</td>
                            <td>                          
                                <select class="form-control-sm w-25" [(ngModel)]="statusProjekta">  
                                    <option>Podnet</option>
                                    <option>Razmatranje</option>
                                    <option>Prihvacen</option>
                                    <option>Dorada</option>
                                    <option>Odbijen</option>
                                </select>
                            </td>
                        </tr>
                        <tr *ngIf="statusProjekta=='Dorada'">
                            <td>Sugestije:</td>
                            <td><input type="text" name="sugestije" [(ngModel)]="sugestije"></td>
                        </tr>
                        <tr *ngIf="statusProjekta=='Dorada'">
                            <td>Primedbe:</td>
                            <td><input type="text" name="primedbe" [(ngModel)]="primedbe"></td>
                        </tr>
                        <tr *ngIf="statusProjekta=='Dorada'">
                            <td>Zahtevi (poslaće se mailom):</td>
                            <td><input type="text" name="zahtevi" [(ngModel)]="zahtevi"></td>
                        </tr>
                        <br>
                       
                        <tr *ngIf="statusProjekta=='Prihvacen' || statusProjekta=='Odbijen'">
                            <td>Obrazlozenje:</td>
                            <td><input type="text" name="obrazlozenje" [(ngModel)]="obrazlozenje"></td>
                        </tr>
                    </tbody>
                </table>
             </div>
        </div>
    </div>
    
    <br>
    <div>

        <div *ngIf="msg1">
            <button class = "msgsuccess">Dodata evaluacija</button>
        </div>
        <div *ngIf="msgblank" style = "height: 60px;"></div>
        <div *ngIf="msg2">
            <button class = "msgerror">Greška</button>
        </div>

        <button *ngIf="showbtnizmena" (click) = "insertEvaluation()">Dodaj evaluaciju</button>
        <br>
    
        <button (click) = "goBack()">Nazad</button>

    </div>




<!-- 
<div>
    <form (ngSubmit)="submitForm()" #resetForm="ngForm">
        <label>Email:</label>
        <input type="email" name="email" [(ngModel)]="email" required>
        <button type="submit">Posalji</button>
    </form>
</div>
-->

<form *ngIf="statusProjekta=='Dorada'" action="mailto:estetikom@mts.rs" method="post" enctype="text/plain">
    <table>
      <tr>
        <td>Rukovodioc: </td>
        <td>{{project.ime}} {{project.prezime}}, {{project.nazivSkrInst}} {{project.gradInst}}<br></td>
      </tr>
      <tr>
        <td>mail:</td>
        <td>{{project.mailRukovodioca}}<br></td>
      </tr>
      <tr>
        <td>Komentar - zahtevi:</td>
        <td><textarea name="zahtevi" [(ngModel)]="zahtevi"></textarea><br><br></td>
      </tr>
    </table>         
    <br>
    <input type="submit" class="button" value="Pošalji">
</form>

    <form *ngIf="statusProjekta=='Prihvacen' || statusProjekta=='Odbijen'" action="mailto:estetikom@mts.rs" method="post" enctype="text/plain">
        <table>
        <tr>
            <td>Rukovodioc: </td>
            <td>{{project.ime}} {{project.prezime}}, {{project.nazivSkrInst}} {{project.gradInst}}<br></td>
        </tr>
        <tr>
            <td>mail:</td>
            <td>{{project.mailRukovodioca}}<br></td>
        </tr>
        <tr>
            <td>Komentar - obrazloženje:</td>
            <td><textarea name="obrazlozenje" [(ngModel)]="obrazlozenje"></textarea><br><br></td>
        </tr>
        </table>         
    <br>
    <input type="submit" class="button" value="Pošalji">
</form>

</div>

<div>
    <br>
    <button *ngIf='user.lozinka!="admin246"' (click) = "goBack()">Nazad</button>
</div>
